{"version":3,"file":"primeng-lts-tree.umd.js","sources":["primeng-lts/tree/tree.ts"],"names":["DomHandler","Inject","forwardRef","Input","Component","EventEmitter","ObjectUtils","ElementRef","TreeDragDropService","Optional","Output","ContentChildren","PrimeTemplate","ViewChild","CdkVirtualScrollViewport","ChangeDetectionStrategy","NgModule","CommonModule","ScrollingModule","SharedModule"],"mappings":"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","sourcesContent":["import {NgModule,Component,Input,AfterContentInit,OnDestroy,Output,EventEmitter,OnInit,OnChanges,\n    ContentChildren,QueryList,TemplateRef,Inject,ElementRef,forwardRef,ChangeDetectionStrategy,SimpleChanges, ViewChild} from '@angular/core';\nimport {CdkVirtualScrollViewport, ScrollingModule} from '@angular/cdk/scrolling';\nimport {Optional} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {TreeNode} from 'primeng-lts/api';\nimport {SharedModule} from 'primeng-lts/api';\nimport {PrimeTemplate} from 'primeng-lts/api';\nimport {TreeDragDropService} from 'primeng-lts/api';\nimport {Subscription} from 'rxjs';\nimport {BlockableUI} from 'primeng-lts/api';\nimport {ObjectUtils} from 'primeng-lts/utils';\nimport {DomHandler} from 'primeng-lts/dom';\n\n@Component({\n    selector: 'p-treeNode',\n    template: `\n        <ng-template [ngIf]=\"node\">\n            <li *ngIf=\"tree.droppableNodes\" class=\"ui-treenode-droppoint\" [ngClass]=\"{'ui-treenode-droppoint-active ui-state-highlight':draghoverPrev}\"\n            (drop)=\"onDropPoint($event,-1)\" (dragover)=\"onDropPointDragOver($event)\" (dragenter)=\"onDropPointDragEnter($event,-1)\" (dragleave)=\"onDropPointDragLeave($event)\"></li>\n            <li *ngIf=\"!tree.horizontal\" role=\"treeitem\" [ngClass]=\"['ui-treenode',node.styleClass||'', isLeaf() ? 'ui-treenode-leaf': '']\">\n                <div class=\"ui-treenode-content\" [style.paddingLeft]=\"(level * 1.5)  + 'em'\" (click)=\"onNodeClick($event)\" (contextmenu)=\"onNodeRightClick($event)\" (touchend)=\"onNodeTouchEnd()\"\n                    (drop)=\"onDropNode($event)\" (dragover)=\"onDropNodeDragOver($event)\" (dragenter)=\"onDropNodeDragEnter($event)\" (dragleave)=\"onDropNodeDragLeave($event)\"\n                    [draggable]=\"tree.draggableNodes\" (dragstart)=\"onDragStart($event)\" (dragend)=\"onDragStop($event)\" [attr.tabindex]=\"0\"\n                    [ngClass]=\"{'ui-treenode-selectable':tree.selectionMode && node.selectable !== false,'ui-treenode-dragover':draghoverNode, 'ui-treenode-content-selected':isSelected()}\"\n                    (keydown)=\"onKeyDown($event)\" [attr.aria-posinset]=\"this.index + 1\" [attr.aria-expanded]=\"this.node.expanded\" [attr.aria-selected]=\"isSelected()\" [attr.aria-label]=\"node.label\">\n                    <span *ngIf=\"!isLeaf()\" class=\"ui-tree-toggler pi ui-unselectable-text\" [ngClass]=\"{'pi-caret-right':!node.expanded,'pi-caret-down':node.expanded}\" (click)=\"toggle($event)\"></span\n                    ><div class=\"ui-chkbox\" *ngIf=\"tree.selectionMode == 'checkbox'\" [attr.aria-checked]=\"isSelected()\"><div class=\"ui-chkbox-box ui-widget ui-corner-all ui-state-default\" [ngClass]=\"{'ui-state-disabled': node.selectable === false}\">\n                        <span class=\"ui-chkbox-icon ui-clickable pi\"\n                            [ngClass]=\"{'pi-check':isSelected(),'pi-minus':node.partialSelected}\"></span></div></div\n                    ><span [class]=\"getIcon()\" *ngIf=\"node.icon||node.expandedIcon||node.collapsedIcon\"></span\n                    ><span class=\"ui-treenode-label ui-corner-all\"\n                        [ngClass]=\"{'ui-state-highlight':isSelected()}\">\n                            <span *ngIf=\"!tree.getTemplateForNode(node)\">{{node.label}}</span>\n                            <span *ngIf=\"tree.getTemplateForNode(node)\">\n                                <ng-container *ngTemplateOutlet=\"tree.getTemplateForNode(node); context: {$implicit: node}\"></ng-container>\n                            </span>\n                    </span>\n                </div>\n                <ul class=\"ui-treenode-children\" style=\"display: none;\" *ngIf=\"!tree.virtualScroll && node.children && node.expanded\" [style.display]=\"node.expanded ? 'block' : 'none'\" role=\"group\">\n                    <p-treeNode *ngFor=\"let childNode of node.children;let firstChild=first;let lastChild=last; let index=index; trackBy: tree.trackBy\" [node]=\"childNode\" [parentNode]=\"node\"\n                        [firstChild]=\"firstChild\" [lastChild]=\"lastChild\" [index]=\"index\" [style.height.px]=\"tree.virtualNodeHeight\" [level]=\"level + 1\"></p-treeNode>\n                </ul>\n            </li>\n            <li *ngIf=\"tree.droppableNodes&&lastChild\" class=\"ui-treenode-droppoint\" [ngClass]=\"{'ui-treenode-droppoint-active ui-state-highlight':draghoverNext}\"\n            (drop)=\"onDropPoint($event,1)\" (dragover)=\"onDropPointDragOver($event)\" (dragenter)=\"onDropPointDragEnter($event,1)\" (dragleave)=\"onDropPointDragLeave($event)\"></li>\n            <table *ngIf=\"tree.horizontal\" [class]=\"node.styleClass\">\n                <tbody>\n                    <tr>\n                        <td class=\"ui-treenode-connector\" *ngIf=\"!root\">\n                            <table class=\"ui-treenode-connector-table\">\n                                <tbody>\n                                    <tr>\n                                        <td [ngClass]=\"{'ui-treenode-connector-line':!firstChild}\"></td>\n                                    </tr>\n                                    <tr>\n                                        <td [ngClass]=\"{'ui-treenode-connector-line':!lastChild}\"></td>\n                                    </tr>\n                                </tbody>\n                            </table>\n                        </td>\n                        <td class=\"ui-treenode\" [ngClass]=\"{'ui-treenode-collapsed':!node.expanded}\">\n                            <div class=\"ui-treenode-content ui-state-default ui-corner-all\" tabindex=\"0\"\n                                [ngClass]=\"{'ui-treenode-selectable':tree.selectionMode,'ui-state-highlight':isSelected()}\" (click)=\"onNodeClick($event)\" (contextmenu)=\"onNodeRightClick($event)\"\n                                (touchend)=\"onNodeTouchEnd()\" (keydown)=\"onNodeKeydown($event)\">\n                                <span class=\"ui-tree-toggler pi pi-fw ui-unselectable-text\" [ngClass]=\"{'pi-plus':!node.expanded,'pi-minus':node.expanded}\" *ngIf=\"!isLeaf()\"\n                                        (click)=\"toggle($event)\"></span\n                                ><span [class]=\"getIcon()\" *ngIf=\"node.icon||node.expandedIcon||node.collapsedIcon\"></span\n                                ><span class=\"ui-treenode-label ui-corner-all\">\n                                        <span *ngIf=\"!tree.getTemplateForNode(node)\">{{node.label}}</span>\n                                        <span *ngIf=\"tree.getTemplateForNode(node)\">\n                                        <ng-container *ngTemplateOutlet=\"tree.getTemplateForNode(node); context: {$implicit: node}\"></ng-container>\n                                        </span>\n                                </span>\n                            </div>\n                        </td>\n                        <td class=\"ui-treenode-children-container\" *ngIf=\"node.children && node.expanded\" [style.display]=\"node.expanded ? 'table-cell' : 'none'\">\n                            <div class=\"ui-treenode-children\">\n                                <p-treeNode *ngFor=\"let childNode of node.children;let firstChild=first;let lastChild=last; trackBy: tree.trackBy\" [node]=\"childNode\"\n                                        [firstChild]=\"firstChild\" [lastChild]=\"lastChild\"></p-treeNode>\n                            </div>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </ng-template>\n    `\n})\nexport class UITreeNode implements OnInit {\n\n    static ICON_CLASS: string = 'ui-treenode-icon ';\n\n    @Input() rowNode: any;\n\n    @Input() node: TreeNode;\n\n    @Input() parentNode: TreeNode;\n\n    @Input() root: boolean;\n\n    @Input() index: number;\n\n    @Input() firstChild: boolean;\n\n    @Input() lastChild: boolean;\n\n    @Input() level: number;\n\n    tree: Tree;\n\n    constructor(@Inject(forwardRef(() => Tree)) tree) {\n        this.tree = tree as Tree;\n    }\n\n    draghoverPrev: boolean;\n\n    draghoverNext: boolean;\n\n    draghoverNode: boolean\n\n    ngOnInit() {\n        this.node.parent = this.parentNode;\n\n        if (this.parentNode) {\n            this.tree.syncNodeOption(this.node, this.tree.value, 'parent', this.tree.getNodeWithKey(this.parentNode.key, this.tree.value));\n        }\n    }\n\n    getIcon() {\n        let icon: string;\n\n        if (this.node.icon)\n            icon = this.node.icon;\n        else\n            icon = this.node.expanded && this.node.children && this.node.children.length ? this.node.expandedIcon : this.node.collapsedIcon;\n\n        return UITreeNode.ICON_CLASS + ' ' + icon;\n    }\n\n    isLeaf() {\n        return this.tree.isNodeLeaf(this.node);\n    }\n\n    toggle(event: Event) {\n        if (this.node.expanded)\n            this.collapse(event);\n        else\n            this.expand(event);\n    }\n\n    expand(event: Event) {\n        this.node.expanded = true;\n        if (this.tree.virtualScroll) {\n            this.tree.updateSerializedValue();\n        }\n        this.tree.onNodeExpand.emit({originalEvent: event, node: this.node});\n    }\n\n    collapse(event: Event) {\n        this.node.expanded = false;\n        if (this.tree.virtualScroll) {\n            this.tree.updateSerializedValue();\n        }\n        this.tree.onNodeCollapse.emit({originalEvent: event, node: this.node});\n    }\n\n    onNodeClick(event: MouseEvent) {\n        this.tree.onNodeClick(event, this.node);\n    }\n\n    onNodeKeydown(event: KeyboardEvent) {\n        if (event.which === 13) {\n            this.tree.onNodeClick(event, this.node);\n        }\n    }\n\n    onNodeTouchEnd() {\n        this.tree.onNodeTouchEnd();\n    }\n\n    onNodeRightClick(event: MouseEvent) {\n        this.tree.onNodeRightClick(event, this.node);\n    }\n\n    isSelected() {\n        return this.tree.isSelected(this.node);\n    }\n\n    onDropPoint(event: Event, position: number) {\n        event.preventDefault();\n        let dragNode = this.tree.dragNode;\n        let dragNodeIndex = this.tree.dragNodeIndex;\n        let dragNodeScope = this.tree.dragNodeScope;\n        let isValidDropPointIndex = this.tree.dragNodeTree === this.tree ? (position === 1 || dragNodeIndex !== this.index - 1) : true;\n\n        if (this.tree.allowDrop(dragNode, this.node, dragNodeScope) && isValidDropPointIndex) {\n            let dropParams = {...this.createDropPointEventMetadata(position)};\n\n            if (this.tree.validateDrop) {\n                this.tree.onNodeDrop.emit({\n                    originalEvent: event,\n                    dragNode: dragNode,\n                    dropNode: this.node,\n                    index: this.index,\n                    accept: () => {\n                        this.processPointDrop(dropParams);\n                    }\n                });\n            }\n            else {\n                this.processPointDrop(dropParams);\n                this.tree.onNodeDrop.emit({\n                    originalEvent: event,\n                    dragNode: dragNode,\n                    dropNode: this.node,\n                    index: this.index\n                });\n            }\n        }\n\n        this.draghoverPrev = false;\n        this.draghoverNext = false;\n    }\n\n    processPointDrop(event) {\n        let newNodeList = event.dropNode.parent ? event.dropNode.parent.children : this.tree.value;\n        event.dragNodeSubNodes.splice(event.dragNodeIndex, 1);\n        let dropIndex = this.index;\n\n        if (event.position < 0) {\n            dropIndex = (event.dragNodeSubNodes === newNodeList) ? ((event.dragNodeIndex > event.index) ? event.index : event.index - 1) : event.index;\n            newNodeList.splice(dropIndex, 0, event.dragNode);\n        }\n        else {\n            dropIndex = newNodeList.length;\n            newNodeList.push(event.dragNode);\n        }\n\n        this.tree.dragDropService.stopDrag({\n            node: event.dragNode,\n            subNodes: event.dropNode.parent ? event.dropNode.parent.children : this.tree.value,\n            index: event.dragNodeIndex\n        });\n    }\n\n    createDropPointEventMetadata(position) {\n        return {\n            dragNode: this.tree.dragNode,\n            dragNodeIndex:  this.tree.dragNodeIndex,\n            dragNodeSubNodes: this.tree.dragNodeSubNodes,\n            dropNode: this.node,\n            index: this.index,\n            position: position\n        };\n    }\n\n    onDropPointDragOver(event) {\n        event.dataTransfer.dropEffect = 'move';\n        event.preventDefault();\n    }\n\n    onDropPointDragEnter(event: Event, position: number) {\n        if (this.tree.allowDrop(this.tree.dragNode, this.node, this.tree.dragNodeScope)) {\n            if (position < 0)\n                this.draghoverPrev = true;\n            else\n                this.draghoverNext = true;\n        }\n    }\n\n    onDropPointDragLeave(event: Event) {\n        this.draghoverPrev = false;\n        this.draghoverNext = false;\n    }\n\n    onDragStart(event) {\n        if (this.tree.draggableNodes && this.node.draggable !== false) {\n            event.dataTransfer.setData(\"text\", \"data\");\n\n            this.tree.dragDropService.startDrag({\n                tree: this,\n                node: this.node,\n                subNodes: this.node.parent ? this.node.parent.children : this.tree.value,\n                index: this.index,\n                scope: this.tree.draggableScope\n            });\n        }\n        else {\n            event.preventDefault();\n        }\n    }\n\n    onDragStop(event) {\n        this.tree.dragDropService.stopDrag({\n            node: this.node,\n            subNodes: this.node.parent ? this.node.parent.children : this.tree.value,\n            index: this.index\n        });\n    }\n\n    onDropNodeDragOver(event) {\n        event.dataTransfer.dropEffect = 'move';\n        if (this.tree.droppableNodes) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    }\n\n    onDropNode(event) {\n        if (this.tree.droppableNodes && this.node.droppable !== false) {\n            let dragNode = this.tree.dragNode;\n\n            if (this.tree.allowDrop(dragNode, this.node, this.tree.dragNodeScope)) {\n                let dropParams = {...this.createDropNodeEventMetadata()};\n\n                if (this.tree.validateDrop) {\n                    this.tree.onNodeDrop.emit({\n                        originalEvent: event,\n                        dragNode: dragNode,\n                        dropNode: this.node,\n                        index: this.index,\n                        accept: () => {\n                            this.processNodeDrop(dropParams);\n                        }\n                    });\n                }\n                else {\n                    this.processNodeDrop(dropParams);\n                    this.tree.onNodeDrop.emit({\n                        originalEvent: event,\n                        dragNode: dragNode,\n                        dropNode: this.node,\n                        index: this.index\n                    });\n                }\n            }\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n        this.draghoverNode = false;\n    }\n\n    createDropNodeEventMetadata() {\n        return {\n            dragNode: this.tree.dragNode,\n            dragNodeIndex:  this.tree.dragNodeIndex,\n            dragNodeSubNodes: this.tree.dragNodeSubNodes,\n            dropNode: this.node\n        };\n    }\n\n    processNodeDrop(event) {\n        let dragNodeIndex = event.dragNodeIndex;\n        event.dragNodeSubNodes.splice(dragNodeIndex, 1);\n\n        if (event.dropNode.children)\n            event.dropNode.children.push(event.dragNode);\n        else\n            event.dropNode.children = [event.dragNode];\n\n        this.tree.dragDropService.stopDrag({\n            node: event.dragNode,\n            subNodes: event.dropNode.parent ? event.dropNode.parent.children : this.tree.value,\n            index: dragNodeIndex\n        });\n    }\n\n    onDropNodeDragEnter(event) {\n        if (this.tree.droppableNodes && this.node.droppable !== false && this.tree.allowDrop(this.tree.dragNode, this.node, this.tree.dragNodeScope)) {\n            this.draghoverNode = true;\n        }\n    }\n\n    onDropNodeDragLeave(event) {\n        if (this.tree.droppableNodes) {\n            let rect = event.currentTarget.getBoundingClientRect();\n            if (event.x > rect.left + rect.width || event.x < rect.left || event.y >= Math.floor(rect.top + rect.height) || event.y < rect.top) {\n               this.draghoverNode = false;\n            }\n        }\n    }\n\n    onKeyDown(event: KeyboardEvent) {\n        const nodeElement = (<HTMLDivElement> event.target).parentElement.parentElement;\n\n        if (nodeElement.nodeName !== 'P-TREENODE' || (this.tree.contextMenu && this.tree.contextMenu.containerViewChild.nativeElement.style.display === 'block')) {\n            return;\n        }\n\n        switch (event.which) {\n            //down arrow\n            case 40:\n                const listElement = (this.tree.droppableNodes) ? nodeElement.children[1].children[1] : nodeElement.children[0].children[1];\n                if (listElement && listElement.children.length > 0) {\n                    this.focusNode(listElement.children[0]);\n                }\n                else {\n                    const nextNodeElement = nodeElement.nextElementSibling;\n                    if (nextNodeElement) {\n                        this.focusNode(nextNodeElement);\n                    }\n                    else {\n                        let nextSiblingAncestor = this.findNextSiblingOfAncestor(nodeElement);\n                        if (nextSiblingAncestor) {\n                            this.focusNode(nextSiblingAncestor);\n                        }\n                    }\n                }\n\n                event.preventDefault();\n            break;\n\n            //up arrow\n            case 38:\n                if (nodeElement.previousElementSibling) {\n                    this.focusNode(this.findLastVisibleDescendant(nodeElement.previousElementSibling));\n                }\n                else {\n                    let parentNodeElement = this.getParentNodeElement(nodeElement);\n                    if (parentNodeElement) {\n                        this.focusNode(parentNodeElement);\n                    }\n                }\n\n                event.preventDefault();\n            break;\n\n            //right arrow\n            case 39:\n                if (!this.node.expanded && !this.tree.isNodeLeaf(this.node)) {\n                    this.expand(event);\n                }\n\n                event.preventDefault();\n            break;\n\n            //left arrow\n            case 37:\n                if (this.node.expanded) {\n                    this.collapse(event);\n                }\n                else {\n                    let parentNodeElement = this.getParentNodeElement(nodeElement);\n                    if (parentNodeElement) {\n                        this.focusNode(parentNodeElement);\n                    }\n                }\n\n                event.preventDefault();\n            break;\n\n            //enter\n            case 13:\n                this.tree.onNodeClick(event, this.node);\n                event.preventDefault();\n            break;\n\n            default:\n                //no op\n            break;\n        }\n    }\n\n    findNextSiblingOfAncestor(nodeElement) {\n        let parentNodeElement = this.getParentNodeElement(nodeElement);\n        if (parentNodeElement) {\n            if (parentNodeElement.nextElementSibling)\n                return parentNodeElement.nextElementSibling;\n            else\n                return this.findNextSiblingOfAncestor(parentNodeElement);\n        }\n        else {\n            return null;\n        }\n    }\n\n    findLastVisibleDescendant(nodeElement) {\n        const listElement = <HTMLElement> Array.from(nodeElement.children).find(el => DomHandler.hasClass(el, 'ui-treenode'));\n        const childrenListElement = listElement.children[1];\n        if (childrenListElement && childrenListElement.children.length > 0) {\n            const lastChildElement = childrenListElement.children[childrenListElement.children.length - 1];\n\n            return this.findLastVisibleDescendant(lastChildElement);\n        }\n        else {\n            return nodeElement;\n        }\n    }\n\n    getParentNodeElement(nodeElement) {\n        const parentNodeElement = nodeElement.parentElement.parentElement.parentElement;\n\n        return parentNodeElement.tagName === 'P-TREENODE' ? parentNodeElement : null;\n    }\n\n    focusNode(element) {\n        if (this.tree.droppableNodes)\n            element.children[1].children[0].focus();\n        else\n            element.children[0].children[0].focus();\n    }\n}\n\n@Component({\n    selector: 'p-tree',\n    template: `\n        <div [ngClass]=\"{'ui-tree ui-widget ui-widget-content ui-corner-all':true,'ui-tree-selectable':selectionMode,\n                'ui-treenode-dragover':dragHover,'ui-tree-loading': loading, 'ui-tree-flex-scrollable': scrollHeight === 'flex'}\" \n            [ngStyle]=\"style\" [class]=\"styleClass\" *ngIf=\"!horizontal\"\n            (drop)=\"onDrop($event)\" (dragover)=\"onDragOver($event)\" (dragenter)=\"onDragEnter()\" (dragleave)=\"onDragLeave($event)\">\n            <div class=\"ui-tree-loading-mask ui-widget-overlay\" *ngIf=\"loading\"></div>\n            <div class=\"ui-tree-loading-content\" *ngIf=\"loading\">\n                <i [class]=\"'ui-tree-loading-icon pi-spin ' + loadingIcon\"></i>\n            </div>\n            <div *ngIf=\"filter\" class=\"ui-tree-filter-container\">\n                <input #filter type=\"text\" autocomplete=\"off\" class=\"ui-tree-filter ui-inputtext ui-widget ui-state-default ui-corner-all\" [attr.placeholder]=\"filterPlaceholder\"\n                    (keydown.enter)=\"$event.preventDefault()\" (input)=\"_filter($event)\">\n                    <span class=\"ui-tree-filter-icon pi pi-search\"></span>\n            </div>\n            <ng-container *ngIf=\"!virtualScroll; else virtualScrollList\">\n                <div class=\"ui-tree-wrapper\" [style.max-height]=\"scrollHeight\">\n                    <ul class=\"ui-tree-container\" *ngIf=\"getRootNode()\" role=\"tree\" [attr.aria-label]=\"ariaLabel\" [attr.aria-labelledby]=\"ariaLabelledBy\">\n                        <p-treeNode *ngFor=\"let node of getRootNode(); let firstChild=first;let lastChild=last; let index=index; trackBy: trackBy\" [node]=\"node\"\n                                    [firstChild]=\"firstChild\" [lastChild]=\"lastChild\" [index]=\"index\" [level]=\"0\"></p-treeNode>\n                    </ul>\n                </div>\n            </ng-container>\n            <ng-template #virtualScrollList>\n                <cdk-virtual-scroll-viewport class=\"ui-tree-wrapper\" [style.height]=\"scrollHeight\" [itemSize]=\"virtualNodeHeight\" [minBufferPx]=\"minBufferPx\" [maxBufferPx]=\"maxBufferPx\">\n                    <ul class=\"ui-tree-container\" *ngIf=\"getRootNode()\" role=\"tree\" [attr.aria-label]=\"ariaLabel\" [attr.aria-labelledby]=\"ariaLabelledBy\">\n                        <p-treeNode *cdkVirtualFor=\"let rowNode of serializedValue; let firstChild=first; let lastChild=last; let index=index; trackBy: trackBy; templateCacheSize: 0\"  [level]=\"rowNode.level\"\n                                    [rowNode]=\"rowNode\" [node]=\"rowNode.node\" [firstChild]=\"firstChild\" [lastChild]=\"lastChild\" [index]=\"index\" [style.height.px]=\"virtualNodeHeight\"></p-treeNode>\n                    </ul>\n                </cdk-virtual-scroll-viewport>\n            </ng-template>\n            <div class=\"ui-tree-empty-message\" *ngIf=\"!loading && (value == null || value.length === 0)\">{{emptyMessage}}</div>\n        </div>\n        <div [ngClass]=\"{'ui-tree ui-tree-horizontal ui-widget ui-widget-content ui-corner-all':true,'ui-tree-selectable':selectionMode}\"  [ngStyle]=\"style\" [class]=\"styleClass\" *ngIf=\"horizontal\">\n            <div class=\"ui-tree-loading ui-widget-overlay\" *ngIf=\"loading\"></div>\n            <div class=\"ui-tree-loading-content\" *ngIf=\"loading\">\n                <i [class]=\"'ui-tree-loading-icon pi-spin ' + loadingIcon\"></i>\n            </div>\n            <table *ngIf=\"value&&value[0]\">\n                <p-treeNode [node]=\"value[0]\" [root]=\"true\"></p-treeNode>\n            </table>\n            <div class=\"ui-tree-empty-message\" *ngIf=\"!loading && (value == null || value.length === 0)\">{{emptyMessage}}</div>\n        </div>\n    `,\n    changeDetection: ChangeDetectionStrategy.Default\n})\nexport class Tree implements OnInit,AfterContentInit,OnChanges,OnDestroy,BlockableUI {\n\n    @Input() value: TreeNode[];\n\n    @Input() selectionMode: string;\n\n    @Input() selection: any;\n\n    @Output() selectionChange: EventEmitter<any> = new EventEmitter();\n\n    @Output() onNodeSelect: EventEmitter<any> = new EventEmitter();\n\n    @Output() onNodeUnselect: EventEmitter<any> = new EventEmitter();\n\n    @Output() onNodeExpand: EventEmitter<any> = new EventEmitter();\n\n    @Output() onNodeCollapse: EventEmitter<any> = new EventEmitter();\n\n    @Output() onNodeContextMenuSelect: EventEmitter<any> = new EventEmitter();\n\n    @Output() onNodeDrop: EventEmitter<any> = new EventEmitter();\n\n    @Input() style: any;\n\n    @Input() styleClass: string;\n\n    @Input() contextMenu: any;\n\n    @Input() layout: string = 'vertical';\n\n    @Input() draggableScope: any;\n\n    @Input() droppableScope: any;\n\n    @Input() draggableNodes: boolean;\n\n    @Input() droppableNodes: boolean;\n\n    @Input() metaKeySelection: boolean = true;\n\n    @Input() propagateSelectionUp: boolean = true;\n\n    @Input() propagateSelectionDown: boolean = true;\n\n    @Input() loading: boolean;\n\n    @Input() loadingIcon: string = 'pi pi-spinner';\n\n    @Input() emptyMessage: string = 'No records found';\n\n    @Input() ariaLabel: string;\n\n    @Input() ariaLabelledBy: string;\n\n    @Input() validateDrop: boolean;\n\n    @Input() filter: boolean;\n\n    @Input() filterBy: string = 'label';\n\n    @Input() filterMode: string = 'lenient';\n\n    @Input() filterPlaceholder: string;\n\n    @Input() filterLocale: string;\n\n    @Input() scrollHeight: string;\n\n    @Input() virtualScroll: boolean;\n\n    @Input() virtualNodeHeight: string;\n\n    @Input() minBufferPx: number;\n\n    @Input() maxBufferPx: number;\n\n    @Input() trackBy: Function = (index: number, item: any) => item;\n\n    @Output() onFilter: EventEmitter<any> = new EventEmitter();\n\n    @ContentChildren(PrimeTemplate) templates: QueryList<any>;\n\n    @ViewChild(CdkVirtualScrollViewport) virtualScrollBody: CdkVirtualScrollViewport;\n\n    serializedValue: any[];\n\n    public templateMap: any;\n\n    public nodeTouched: boolean;\n\n    public dragNodeTree: Tree;\n\n    public dragNode: TreeNode;\n\n    public dragNodeSubNodes: TreeNode[];\n\n    public dragNodeIndex: number;\n\n    public dragNodeScope: any;\n\n    public dragHover: boolean;\n\n    public dragStartSubscription: Subscription;\n\n    public dragStopSubscription: Subscription;\n\n    public filteredNodes: TreeNode[];\n\n    constructor(public el: ElementRef, @Optional() public dragDropService: TreeDragDropService) {}\n\n    ngOnInit() {\n        if (this.droppableNodes) {\n            this.dragStartSubscription = this.dragDropService.dragStart$.subscribe(\n              event => {\n                this.dragNodeTree = event.tree;\n                this.dragNode = event.node;\n                this.dragNodeSubNodes = event.subNodes;\n                this.dragNodeIndex = event.index;\n                this.dragNodeScope = event.scope;\n            });\n\n            this.dragStopSubscription = this.dragDropService.dragStop$.subscribe(\n              event => {\n                this.dragNodeTree = null;\n                this.dragNode = null;\n                this.dragNodeSubNodes = null;\n                this.dragNodeIndex = null;\n                this.dragNodeScope = null;\n                this.dragHover = false;\n            });\n        }\n    }\n\n    ngOnChanges(simpleChange: SimpleChanges) {\n        if (simpleChange.value) {\n            this.updateSerializedValue();\n        }\n\n        if (simpleChange.scrollHeight && this.virtualScrollBody) {\n            this.virtualScrollBody.ngOnInit();\n        }\n    }\n\n    get horizontal(): boolean {\n        return this.layout == 'horizontal';\n    }\n\n    ngAfterContentInit() {\n        if (this.templates.length) {\n            this.templateMap = {};\n        }\n\n        this.templates.forEach((item) => {\n            this.templateMap[item.name] = item.template;\n        });\n    }\n\n    updateSerializedValue() {\n        this.serializedValue = [];\n        this.serializeNodes(null, this.getRootNode(), 0, true);\n    }\n\n    serializeNodes(parent, nodes, level, visible) {\n        if (nodes && nodes.length) {\n            for(let node of nodes) {\n                node.parent = parent;\n                const rowNode = {\n                    node: node,\n                    parent: parent,\n                    level: level,\n                    visible: visible && (parent ? parent.expanded : true)\n                };\n                this.serializedValue.push(rowNode);\n\n                if (rowNode.visible && node.expanded) {\n                    this.serializeNodes(node, node.children, level + 1, rowNode.visible);\n                }\n            }\n        }\n    }\n\n    onNodeClick(event, node: TreeNode) {\n        let eventTarget = (<Element> event.target);\n\n        if (DomHandler.hasClass(eventTarget, 'ui-tree-toggler')) {\n            return;\n        }\n        else if (this.selectionMode) {\n            if (node.selectable === false) {\n                return;\n            }\n\n            if (this.hasFilteredNodes()) {\n                node = this.getNodeWithKey(node.key, this.value);\n\n                if (!node) {\n                    return;\n                }\n            }\n\n            let index = this.findIndexInSelection(node);\n            let selected = (index >= 0);\n\n            if (this.isCheckboxSelectionMode()) {\n                if (selected) {\n                    if (this.propagateSelectionDown)\n                        this.propagateDown(node, false);\n                    else\n                        this.selection = this.selection.filter((val,i) => i!=index);\n\n                    if (this.propagateSelectionUp && node.parent) {\n                        this.propagateUp(node.parent, false);\n                    }\n\n                    this.selectionChange.emit(this.selection);\n                    this.onNodeUnselect.emit({originalEvent: event, node: node});\n                }\n                else {\n                    if (this.propagateSelectionDown)\n                        this.propagateDown(node, true);\n                    else\n                        this.selection = [...this.selection||[],node];\n\n                    if (this.propagateSelectionUp && node.parent) {\n                        this.propagateUp(node.parent, true);\n                    }\n\n                    this.selectionChange.emit(this.selection);\n                    this.onNodeSelect.emit({originalEvent: event, node: node});\n                }\n            }\n            else {\n                let metaSelection = this.nodeTouched ? false : this.metaKeySelection;\n\n                if (metaSelection) {\n                    let metaKey = (event.metaKey||event.ctrlKey);\n\n                    if (selected && metaKey) {\n                        if (this.isSingleSelectionMode()) {\n                            this.selectionChange.emit(null);\n                        }\n                        else {\n                            this.selection = this.selection.filter((val,i) => i!=index);\n                            this.selectionChange.emit(this.selection);\n                        }\n\n                        this.onNodeUnselect.emit({originalEvent: event, node: node});\n                    }\n                    else {\n                        if (this.isSingleSelectionMode()) {\n                            this.selectionChange.emit(node);\n                        }\n                        else if (this.isMultipleSelectionMode()) {\n                            this.selection = (!metaKey) ? [] : this.selection||[];\n                            this.selection = [...this.selection,node];\n                            this.selectionChange.emit(this.selection);\n                        }\n\n                        this.onNodeSelect.emit({originalEvent: event, node: node});\n                    }\n                }\n                else {\n                    if (this.isSingleSelectionMode()) {\n                        if (selected) {\n                            this.selection = null;\n                            this.onNodeUnselect.emit({originalEvent: event, node: node});\n                        }\n                        else {\n                            this.selection = node;\n                            this.onNodeSelect.emit({originalEvent: event, node: node});\n                        }\n                    }\n                    else {\n                        if (selected) {\n                            this.selection = this.selection.filter((val,i) => i!=index);\n                            this.onNodeUnselect.emit({originalEvent: event, node: node});\n                        }\n                        else {\n                            this.selection = [...this.selection||[],node];\n                            this.onNodeSelect.emit({originalEvent: event, node: node});\n                        }\n                    }\n\n                    this.selectionChange.emit(this.selection);\n                }\n            }\n        }\n\n        this.nodeTouched = false;\n    }\n\n    onNodeTouchEnd() {\n        this.nodeTouched = true;\n    }\n\n    onNodeRightClick(event: MouseEvent, node: TreeNode) {\n        if (this.contextMenu) {\n            let eventTarget = (<Element> event.target);\n\n            if (eventTarget.className && eventTarget.className.indexOf('ui-tree-toggler') === 0) {\n                return;\n            }\n            else {\n                let index = this.findIndexInSelection(node);\n                let selected = (index >= 0);\n\n                if (!selected) {\n                    if (this.isSingleSelectionMode())\n                        this.selectionChange.emit(node);\n                    else\n                        this.selectionChange.emit([node]);\n                }\n\n                this.contextMenu.show(event);\n                this.onNodeContextMenuSelect.emit({originalEvent: event, node: node});\n            }\n        }\n    }\n\n    findIndexInSelection(node: TreeNode) {\n        let index: number = -1;\n\n        if (this.selectionMode && this.selection) {\n            if (this.isSingleSelectionMode()) {\n                let areNodesEqual = (this.selection.key && this.selection.key === node.key) || this.selection == node;\n                index = areNodesEqual ? 0 : - 1;\n            }\n            else {\n                for(let i = 0; i  < this.selection.length; i++) {\n                    let selectedNode = this.selection[i];\n                    let areNodesEqual = (selectedNode.key && selectedNode.key === node.key) || selectedNode == node;\n                    if (areNodesEqual) {\n                        index = i;\n                        break;\n                    }\n                }\n            }\n        }\n\n        return index;\n    }\n\n    syncNodeOption(node, parentNodes, option, value?: any) {\n        // to synchronize the node option between the filtered nodes and the original nodes(this.value)\n        const _node = this.hasFilteredNodes() ? this.getNodeWithKey(node.key, parentNodes) : null;\n        if (_node) {\n            _node[option] = value||node[option];\n        }\n    }\n\n    hasFilteredNodes() {\n        return this.filter && this.filteredNodes && this.filteredNodes.length;\n    }\n\n    getNodeWithKey(key: string, nodes: TreeNode[]) {\n        for (let node of nodes) {\n            if (node.key === key) {\n                return node;\n            }\n\n            if (node.children) {\n                let matchedNode = this.getNodeWithKey(key, node.children);\n                if (matchedNode) {\n                    return matchedNode;\n                }\n            }\n        }\n    }\n\n    propagateUp(node: TreeNode, select: boolean) {\n        if (node.children && node.children.length) {\n            let selectedCount: number = 0;\n            let childPartialSelected: boolean = false;\n            for(let child of node.children) {\n                if (this.isSelected(child)) {\n                    selectedCount++;\n                }\n                else if (child.partialSelected) {\n                    childPartialSelected = true;\n                }\n            }\n\n            if (select && selectedCount == node.children.length) {\n                this.selection = [...this.selection||[],node];\n                node.partialSelected = false;\n            }\n            else {\n                if (!select) {\n                    let index = this.findIndexInSelection(node);\n                    if (index >= 0) {\n                        this.selection = this.selection.filter((val,i) => i!=index);\n                    }\n                }\n\n                if (childPartialSelected || selectedCount > 0 && selectedCount != node.children.length)\n                    node.partialSelected = true;\n                else\n                    node.partialSelected = false;\n            }\n\n            this.syncNodeOption(node, this.filteredNodes, 'partialSelected');\n        }\n\n        let parent = node.parent;\n        if (parent) {\n            this.propagateUp(parent, select);\n        }\n    }\n\n    propagateDown(node: TreeNode, select: boolean) {\n        let index = this.findIndexInSelection(node);\n\n        if (select && index == -1) {\n            this.selection = [...this.selection||[],node];\n        }\n        else if (!select && index > -1) {\n            this.selection = this.selection.filter((val,i) => i!=index);\n        }\n\n        node.partialSelected = false;\n\n        this.syncNodeOption(node, this.filteredNodes, 'partialSelected');\n\n        if (node.children && node.children.length) {\n            for(let child of node.children) {\n                this.propagateDown(child, select);\n            }\n        }\n    }\n\n    isSelected(node: TreeNode) {\n        return this.findIndexInSelection(node) != -1;\n    }\n\n    isSingleSelectionMode() {\n        return this.selectionMode && this.selectionMode == 'single';\n    }\n\n    isMultipleSelectionMode() {\n        return this.selectionMode && this.selectionMode == 'multiple';\n    }\n\n    isCheckboxSelectionMode() {\n        return this.selectionMode && this.selectionMode == 'checkbox';\n    }\n\n    isNodeLeaf(node) {\n        return node.leaf == false ? false : !(node.children && node.children.length);\n    }\n\n    getRootNode() {\n        return this.filteredNodes ? this.filteredNodes : this.value;\n    }\n\n    getTemplateForNode(node: TreeNode): TemplateRef<any> {\n        if (this.templateMap)\n            return node.type ? this.templateMap[node.type] : this.templateMap['default'];\n        else\n            return null;\n    }\n\n    onDragOver(event) {\n        if (this.droppableNodes && (!this.value || this.value.length === 0)) {\n            event.dataTransfer.dropEffect = 'move';\n            event.preventDefault();\n        }\n    }\n\n    onDrop(event) {\n        if (this.droppableNodes && (!this.value || this.value.length === 0)) {\n            event.preventDefault();\n            let dragNode = this.dragNode;\n\n            if (this.allowDrop(dragNode, null, this.dragNodeScope)) {\n                let dragNodeIndex = this.dragNodeIndex;\n                this.value = this.value||[];\n\n                if (this.validateDrop) {\n                    this.onNodeDrop.emit({\n                        originalEvent: event,\n                        dragNode: dragNode,\n                        dropNode: null,\n                        index: dragNodeIndex,\n                        accept: () => {\n                            this.processTreeDrop(dragNode, dragNodeIndex);\n                        }\n                    });\n                }\n                else {\n                    this.onNodeDrop.emit({\n                        originalEvent: event,\n                        dragNode: dragNode,\n                        dropNode: null,\n                        index: dragNodeIndex\n                    });\n                    \n                    this.processTreeDrop(dragNode, dragNodeIndex);\n                }\n            }\n        }\n    }\n\n    processTreeDrop(dragNode, dragNodeIndex) {\n        this.dragNodeSubNodes.splice(dragNodeIndex, 1);\n        this.value.push(dragNode);\n        this.dragDropService.stopDrag({\n            node: dragNode\n        });\n    }\n\n    onDragEnter() {\n        if (this.droppableNodes && this.allowDrop(this.dragNode, null, this.dragNodeScope)) {\n            this.dragHover = true;\n        }\n    }\n\n    onDragLeave(event) {\n        if (this.droppableNodes) {\n            let rect = event.currentTarget.getBoundingClientRect();\n            if (event.x > rect.left + rect.width || event.x < rect.left || event.y > rect.top + rect.height || event.y < rect.top) {\n               this.dragHover = false;\n            }\n        }\n    }\n\n    allowDrop(dragNode: TreeNode, dropNode: TreeNode, dragNodeScope: any): boolean {\n        if (!dragNode) {\n            //prevent random html elements to be dragged\n            return false;\n        }\n        else if (this.isValidDragScope(dragNodeScope)) {\n            let allow: boolean = true;\n            if (dropNode) {\n                if (dragNode === dropNode) {\n                    allow = false;\n                }\n                else {\n                    let parent = dropNode.parent;\n                    while(parent != null) {\n                        if (parent === dragNode) {\n                            allow = false;\n                            break;\n                        }\n                        parent = parent.parent;\n                    }\n                }\n            }\n\n            return allow;\n        }\n        else {\n            return false;\n        }\n    }\n\n    isValidDragScope(dragScope: any): boolean {\n        let dropScope = this.droppableScope;\n\n        if (dropScope) {\n            if (typeof dropScope === 'string') {\n                if (typeof dragScope === 'string')\n                    return dropScope === dragScope;\n                else if (dragScope instanceof Array)\n                    return (<Array<any>>dragScope).indexOf(dropScope) != -1;\n            }\n            else if (dropScope instanceof Array) {\n                if (typeof dragScope === 'string') {\n                    return (<Array<any>>dropScope).indexOf(dragScope) != -1;\n                }\n                else if (dragScope instanceof Array) {\n                    for(let s of dropScope) {\n                        for(let ds of dragScope) {\n                            if (s === ds) {\n                                return true;\n                            }\n                        }\n                    }\n                }\n            }\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n\n    _filter(event) {\n        let filterValue = event.target.value;\n        if (filterValue === '') {\n            this.filteredNodes = null;\n        }\n        else {\n            this.filteredNodes = [];\n            const searchFields: string[] = this.filterBy.split(',');\n            const filterText = ObjectUtils.removeAccents(filterValue).toLocaleLowerCase(this.filterLocale);\n            const isStrictMode = this.filterMode === 'strict';\n            for(let node of this.value) {\n                let copyNode = {...node};\n                let paramsWithoutNode = {searchFields, filterText, isStrictMode};\n                if ((isStrictMode && (this.findFilteredNodes(copyNode, paramsWithoutNode) || this.isFilterMatched(copyNode, paramsWithoutNode))) ||\n                    (!isStrictMode && (this.isFilterMatched(copyNode, paramsWithoutNode) || this.findFilteredNodes(copyNode, paramsWithoutNode)))) {\n                    this.filteredNodes.push(copyNode);\n                }\n            }\n        }\n\n        this.updateSerializedValue();\n        this.onFilter.emit({\n            filter: filterValue,\n            filteredValue: this.filteredNodes\n        });\n    }\n\n    findFilteredNodes(node, paramsWithoutNode) {\n        if (node) {\n            let matched = false;\n            if (node.children) {\n                let childNodes = [...node.children];\n                node.children = [];\n                for (let childNode of childNodes) {\n                    let copyChildNode = {...childNode};\n                    if (this.isFilterMatched(copyChildNode, paramsWithoutNode)) {\n                        matched = true;\n                        node.children.push(copyChildNode);\n                    }\n                }\n            }\n\n            if (matched) {\n                node.expanded = true;\n                return true;\n            }\n        }\n    }\n\n    isFilterMatched(node, {searchFields, filterText, isStrictMode}) {\n        let matched = false;\n        for(let field of searchFields) {\n            let fieldValue = ObjectUtils.removeAccents(String(ObjectUtils.resolveFieldData(node, field))).toLocaleLowerCase(this.filterLocale);\n            if (fieldValue.indexOf(filterText) > -1) {\n                matched = true;\n            }\n        }\n\n        if (!matched || (isStrictMode && !this.isNodeLeaf(node))) {\n            matched = this.findFilteredNodes(node, {searchFields, filterText, isStrictMode}) || matched;\n        }\n\n        return matched;\n    }\n\n    getBlockableElement(): HTMLElement {\n      return this.el.nativeElement.children[0];\n    }\n\n    ngOnDestroy() {\n        if (this.dragStartSubscription) {\n            this.dragStartSubscription.unsubscribe();\n        }\n\n        if (this.dragStopSubscription) {\n            this.dragStopSubscription.unsubscribe();\n        }\n    }\n}\n@NgModule({\n    imports: [CommonModule,ScrollingModule],\n    exports: [Tree,SharedModule,ScrollingModule],\n    declarations: [Tree,UITreeNode]\n})\nexport class TreeModule { }\n"]}